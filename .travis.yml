# Travis config for Chef testing

language: ruby
gemfile:
  - test/support/Gemfile

env:
  global:
    - OPSCODE_USER=tpt-travis
    - ORGNAME=tensqft
    - CHEFDIR=test/chef
    - secure: "ackARWVgvFzdMeY5Hp1iVZW0OWl2Lh2iUnNbLnT/XRLPZz6/Y/ecnCtJrKRVVUtXr0O2YkIvPUc6f8h+z3sHOkMi3sLHLg9Hf35Tuy4+Gp5t71X3pA1lIoy/yXBPcxvud/FeIHPNV1A2sJDFzMzSPyu0tCIoImX5HR6c5p+GPXA="

# specify ruby version to run this under
# make sure this is consistent with the ruby version in the Gemfile
rvm:
  - 2.1.0

script:
  - bundle exec rake foodcritic # run foodcritic linter
  - bundle exec rake knife

# figure out how to clean this up
after_success: 
  - bash test/support/manage_deploy.sh
